var user = [
    {
        userName : 'phanduykhoa719',
        pass : '123456',
        name : 'Phan Duy Khoa',
        avata : '/assets/img/avata/avata1.jpg',
        id_rolde : 1
    },
    {
        userName : 'admin01',
        pass : '123456',
        name : 'Sơn Đặng',
        avata : '/assets/img/avata/avata1.jpg',
        id_rolde : 2
    },
    {
        userName : 'user1',
        pass : '123456',
        name : 'Đỗ Nam Trung',
        avata : '/assets/img/avata/avata1.jpg',
        id_rolde : 1
    },
    {
        userName : 'conchimvanhkhuuyen123',
        pass : '123456',
        name : 'Leo Messi',
        avata : '/assets/img/avata/avata1.jpg',
        id_rolde : 1
    },
]

var userRole = [
    {
        id : 1,
        name : 'Người dùng'
    },
    {
        id : 2,
        name : 'Quản trị viên'
    }
]

var singers = [
    {
        id : 1,
        name : 'Hoàng Dũng',
        description : '',
        image : './assets/img/singer/hoangdung.jpg',
    },
    {
        id : 2,
        name : 'Amee',
        description : '',
        image : './assets/img/singer/amee.jpg',
    },
    {
        id : 3,
        name : 'BinZ',
        description : '',
        image : './assets/img/singer/binz.jpg',
    },
    {
        id : 4,
        name : 'Đen Vâu',
        description : '',
        image : './assets/img/singer/denvau.jpg',
    },
    {
        id : 5,
        name : 'Justatee',
        description : '',
        image : './assets/img/singer/justatee.jpg',
    },
    {
        id : 6,
        name : 'Karik',
        description : '',
        image : './assets/img/singer/karik.jpg',
    },
    {
        id : 7,
        name : 'Noo Phước Thịnh',
        description : '',
        image : './assets/img/singer/noo.jpg',
    },
    {
        id : 8,
        name : 'Sobin Hoàng Sơn',
        description : '',
        image : './assets/img/singer/soobin.jpg',
    },
    {
        id : 9,
        name : 'Sơn Tùng MTP',
        description : '',
        image : './assets/img/singer/sontung.jpg',
    }
]

var categorySong = [
    {
        id : 1,
        name :  'Nhạc Trẻ Việt Nam'
    },
    {
        id : 2,
        name :  'Nhạc Trung'
    },
    {
        id : 3,
        name :  'Nhạc Hàn'
    },
    {
        id : 4,
        name :  'Nhạc Âu Mỹ'
    },
    {
        id : 5,
        name :  'Nhạc Trữ Tình'
    },
    {
        id : 6,
        name :  'Nhạc Rap'
    },
    {
        id : 7,
        name :  'Nhạc Tiền Chiến'
    },
    {
        id : 8,
        name :  'Nhạc Acoustic'
    },
    {
        id : 9,
        name :  'Nhạc Cover'
    },
]

var songs = [
    {
        id : 1,
        name : 'Chẳng Nói Nên Lời (Acoustic)',
        path : './assets/music/hoangdung/Hoàng Dũng - Chẳng Nói Nên Lời (Acoustic).mp3',
        linkMV : 'https://www.youtube.com/watch?v=9cPJLlNwO-w',
        imageSong: './assets/img/picture_song/hoangdung_pic.jpg' ,
        id_Singer : 1,
        id_Category : 8

    },
    {
        id : 2,
        name : 'Yếu Đuối',
        path : './assets/music/hoangdung/Hoàng Dũng - Yếu Đuối.mp3',
        linkMV : 'https://www.youtube.com/watch?v=9cPJLlNwO-w',
        imageSong: './assets/img/picture_song/hoangdung_pic.jpg' ,
        id_Singer : 1,
        id_Category : 1

    },
    {
        id : 3,
        name : 'Nàng Thơ',
        path : './assets/music/hoangdung/nangtho.mp3',
        linkMV : 'https://www.youtube.com/watch?v=9cPJLlNwO-w',
        imageSong: './assets/img/picture_song/hoangdung_pic.jpg' ,
        id_Singer : 1,
        id_Category : 1

    },
    {
        id : 4,
        name : 'Chờ Anh Nhé',
        path : './assets/music/hoangdung/Hoàng Dũng, Hoàng Rob - Chờ Anh Nhé.mp3',
        linkMV : 'https://www.youtube.com/watch?v=9cPJLlNwO-w',
        imageSong: './assets/img/picture_song/hoangdung_pic.jpg' ,
        id_Singer : 1,
        id_Category : 1

    },
    {
        id : 5,
        name : 'Anh Đánh Rơi Người Yêu Này',
        path : './assets/music/amee/anhdanhroinynay.mp3',
        linkMV : 'https://www.youtube.com/watch?v=9cPJLlNwO-w',
        imageSong: './assets/img/picture_song/amee_pic.jpg' ,
        id_Singer : 2,
        id_Category : 1

    },
    {
        id : 6,
        name : 'Anh Nhà Ở Đâu Thế',
        path : './assets/music/amee/anhnhaodauthe.mp3',
        linkMV : 'https://www.youtube.com/watch?v=9cPJLlNwO-w',
        imageSong: './assets/img/picture_song/amee_pic.jpg' ,
        id_Singer : 2,
        id_Category : 1

    },
    {
        id : 7,
        name : 'Đen đá không đường',
        path : './assets/music/amee/dendakduong.mp3',
        linkMV : 'https://www.youtube.com/watch?v=9cPJLlNwO-w',
        imageSong: './assets/img/picture_song/amee_pic.jpg' ,
        id_Singer : 2,
        id_Category : 1

    },
    {
        id : 8,
        name : 'Do For Love',
        path : './assets/music/amee/doforlove.mp3',
        linkMV : 'https://www.youtube.com/watch?v=9cPJLlNwO-w',
        imageSong: './assets/img/picture_song/amee_pic.jpg' ,
        id_Singer : 2,
        id_Category : 1

    },
    {
        id : 9,
        name : 'Ex Hate Me',
        path : './assets/music/amee/exhateme.mp3',
        linkMV : 'https://www.youtube.com/watch?v=9cPJLlNwO-w',
        imageSong: './assets/img/picture_song/amee_pic.jpg' ,
        id_Singer : 2,
        id_Category : 1

    },
    {
        id : 10,
        name : 'Sao Anh Chưa Về',
        path : './assets/music/amee/saoanhchuave.mp3',
        linkMV : 'https://www.youtube.com/watch?v=9cPJLlNwO-w',
        imageSong: './assets/img/picture_song/amee_pic.jpg' ,
        id_Singer : 2,
        id_Category : 1

    },
    {
        id : 11,
        name : 'Trời dấu trời mang đi',
        path : './assets/music/amee/troidautroimangdi.mp3',
        linkMV : 'https://www.youtube.com/watch?v=9cPJLlNwO-w',
        imageSong: './assets/img/picture_song/amee_pic.jpg' ,
        id_Singer : 2,
        id_Category : 1

    },
    {
        id : 12,
        name : 'Nguyên Team Đi Vào Hết',
        path : './assets/music/binz/Binz - Nguyên Team Đi Vào Hết.mp3',
        linkMV : 'https://www.youtube.com/watch?v=9cPJLlNwO-w',
        imageSong: './assets/img/picture_song/binz_pic.jpg' ,
        id_Singer : 3,
        id_Category : 6

    },
    {
        id : 13,
        name : 'SOFAR',
        path : './assets/music/binz/Binz - SOFAR.mp3',
        linkMV : 'https://www.youtube.com/watch?v=9cPJLlNwO-w',
        imageSong: './assets/img/picture_song/binz_pic.jpg' ,
        id_Singer : 3,
        id_Category : 6

    },
    {
        id : 14,
        name : 'Bigcityboi',
        path : './assets/music/binz/Binz, Touliver - Bigcityboi.mp3',
        linkMV : 'https://www.youtube.com/watch?v=9cPJLlNwO-w',
        imageSong: './assets/img/picture_song/binz_pic.jpg' ,
        id_Singer : 3,
        id_Category : 6

    },
    {
        id : 15,
        name : 'They Said',
        path : './assets/music/binz/Touliver, Binz - They Said.mp3',
        linkMV : 'https://www.youtube.com/watch?v=9cPJLlNwO-w',
        imageSong: './assets/img/picture_song/binz_pic.jpg' ,
        id_Singer : 3,
        id_Category : 6

    },
    {
        id : 16,
        name : 'Krazy',
        path : './assets/music/binz/Touliver, Binz, Andree, Evy - Krazy.mp3',
        linkMV : 'https://www.youtube.com/watch?v=9cPJLlNwO-w',
        imageSong: './assets/img/picture_song/binz_pic.jpg' ,
        id_Singer : 3,
        id_Category : 6

    },
    {
        id : 17,
        name : 'Anh Đếch Cần Gì Nhiều Ngoài Em',
        path : './assets/music/denvau/Đen - Anh Đếch Cần Gì Nhiều Ngoài Em ft. Vũ., Thành Đồng (M-V) (128  kbps).mp3',
        linkMV : 'https://www.youtube.com/watch?v=9cPJLlNwO-w',
        imageSong: './assets/img/picture_song/den_pic.jpg' ,
        id_Singer : 4,
        id_Category : 6

    },
    {
        id : 18,
        name : 'Hai triệu năm',
        path : './assets/music/denvau/Đen - hai triệu năm ft. Biên (m-v) (128  kbps) (1).mp3',
        linkMV : 'https://www.youtube.com/watch?v=9cPJLlNwO-w',
        imageSong: './assets/img/picture_song/den_pic.jpg' ,
        id_Singer : 4,
        id_Category : 6

    },
    {
        id : 19,
        name : 'Bài Này Chill Phết',
        path : './assets/music/denvau/Đen ft. MIN - Bài Này Chill Phết (M-V) (128  kbps).mp3',
        linkMV : 'https://www.youtube.com/watch?v=9cPJLlNwO-w',
        imageSong: './assets/img/picture_song/den_pic.jpg' ,
        id_Singer : 4,
        id_Category : 6

    },
    {
        id : 20,
        name : 'Đố Em Biết Anh Đang Nghĩ Gì',
        path : './assets/music/denvau/Đen, JustaTee, Biên - Đố Em Biết Anh Đang Nghĩ Gì.mp3',
        linkMV : 'https://www.youtube.com/watch?v=9cPJLlNwO-w',
        imageSong: './assets/img/picture_song/den_pic.jpg' ,
        id_Singer : 4,
        id_Category : 6

    },
    {
        id : 21,
        name : 'Bâng Khuâng',
        path : './assets/music/justatee/JustaTee - Bâng Khuâng.mp3',
        linkMV : 'https://www.youtube.com/watch?v=9cPJLlNwO-w',
        imageSong: './assets/img/picture_song/justatee_pic.jpg' ,
        id_Singer : 5,
        id_Category : 6

    },
    {
        id : 22,
        name : 'Forever Alone',
        path : './assets/music/justatee/JustaTee - Forever Alone.mp3',
        linkMV : 'https://www.youtube.com/watch?v=9cPJLlNwO-w',
        imageSong: './assets/img/picture_song/justatee_pic.jpg' ,
        id_Singer : 5,
        id_Category : 1

    },
    {
        id : 23,
        name : 'Người Nào Đó',
        path : './assets/music/justatee/JustaTee - Người Nào Đó.mp3',
        linkMV : 'https://www.youtube.com/watch?v=9cPJLlNwO-w',
        imageSong: './assets/img/picture_song/justatee_pic.jpg' ,
        id_Singer : 5,
        id_Category : 1

    },
    {
        id : 24,
        name : 'She Neva Knows',
        path : './assets/music/justatee/JustaTee - She Neva Knows.mp3',
        linkMV : 'https://www.youtube.com/watch?v=9cPJLlNwO-w',
        imageSong: './assets/img/picture_song/justatee_pic.jpg' ,
        id_Singer : 5,
        id_Category : 1

    },
    {
        id : 25,
        name : 'Thằng Điên',
        path : './assets/music/justatee/JustaTee, Phương Ly - Thằng Điên.mp3',
        linkMV : 'https://www.youtube.com/watch?v=9cPJLlNwO-w',
        imageSong: './assets/img/picture_song/justatee_pic.jpg' ,
        id_Singer : 5,
        id_Category : 1

    },
    {
        id : 26,
        name : 'Anh Là Của Em',
        path : './assets/music/karik/Anh La Cua Em - Karik.mp3',
        linkMV : 'https://www.youtube.com/watch?v=9cPJLlNwO-w',
        imageSong: './assets/img/picture_song/karik_pic.jpg' ,
        id_Singer : 6,
        id_Category : 6

    },
    {
        id : 27,
        name : 'Cạn Cả Nước Mắt',
        path : './assets/music/karik/CanCaNuocMat-KarikThaiTrinh-4452295.mp3',
        linkMV : 'https://www.youtube.com/watch?v=9cPJLlNwO-w',
        imageSong: './assets/img/picture_song/karik_pic.jpg' ,
        id_Singer : 6,
        id_Category : 6

    },
    {
        id : 28,
        name : 'Giá Như',
        path : './assets/music/noo/Noo Phuoc Thinh - Giá Như.mp3',
        linkMV : 'https://www.youtube.com/watch?v=9cPJLlNwO-w',
        imageSong: './assets/img/picture_song/noo_pic.jpg' ,
        id_Singer : 7,
        id_Category : 2

    },
    {
        id : 29,
        name : 'Xa Em',
        path : './assets/music/noo/Noo Phuoc Thinh - Xa Em.mp3',
        linkMV : 'https://www.youtube.com/watch?v=9cPJLlNwO-w',
        imageSong: './assets/img/picture_song/noo_pic.jpg' ,
        id_Singer : 7,
        id_Category : 3

    },
    {
        id : 30,
        name : 'Chạm Khẽ Tim Anh Một Chút Thôi',
        path : './assets/music/noo/Noo Phước Thịnh - Chạm Khẽ Tim Anh Một Chút Thôi.mp3',
        linkMV : 'https://www.youtube.com/watch?v=9cPJLlNwO-w',
        imageSong: './assets/img/picture_song/noo_pic.jpg' ,
        id_Singer : 7,
        id_Category : 1

    },
    {
        id : 31,
        name : 'Anh Đã Quen Với Cô Đơn',
        path : './assets/music/sobin/Anh Đã Quen Với Cô Đơn - Soobin Hoàng Sơn (Lyrics) (128  kbps).mp3',
        linkMV : 'https://www.youtube.com/watch?v=9cPJLlNwO-w',
        imageSong: './assets/img/picture_song/soobin_pic.jpg' ,
        id_Singer : 8,
        id_Category : 4

    },
    {
        id : 32,
        name : 'DAYDREAMS',
        path : './assets/music/sobin/DAYDREAMS _ Soobin Hoàng Sơn ft. BigDaddy _ Nhạc trẻ hay tuyển chọn (128  kbps).mp3',
        linkMV : 'https://www.youtube.com/watch?v=9cPJLlNwO-w',
        imageSong: './assets/img/picture_song/soobin_pic.jpg' ,
        id_Singer : 8,
        id_Category : 1

    },
    {
        id : 33,
        name : 'Ngày Mai Em Đi',
        path : './assets/music/sobin/Ngày Mai Em Đi (128  kbps).mp3',
        linkMV : 'https://www.youtube.com/watch?v=9cPJLlNwO-w',
        imageSong: './assets/img/picture_song/soobin_pic.jpg' ,
        id_Singer : 8,
        id_Category : 1

    },
    {
        id : 34,
        name : 'NẾU NGÀY ẤY',
        path : './assets/music/sobin/NẾU NGÀY ẤY _ SOOBIN HOÀNG SƠN [Official Lyric Video] (128  kbps).mp3',
        linkMV : 'https://www.youtube.com/watch?v=9cPJLlNwO-w',
        imageSong: './assets/img/picture_song/soobin_pic.jpg' ,
        id_Singer : 8,
        id_Category : 5

    },
    {
        id : 35,
        name : 'PHÍA SAU MỘT CÔ GÁI',
        path : './assets/music/sobin/PHÍA SAU MỘT CÔ GÁI - Soobin Hoàng Sơn ( OFFICIAL Lyric Video ) (128  kbps).mp3',
        linkMV : 'https://www.youtube.com/watch?v=9cPJLlNwO-w',
        imageSong: './assets/img/picture_song/soobin_pic.jpg' ,
        id_Singer : 8,
        id_Category : 1

    },
    {
        id : 36,
        name : 'XIN ĐỪNG LẶNG IM ',
        path : './assets/music/sobin/SOOBIN HOÀNG SƠN - XIN ĐỪNG LẶNG IM _ Official Audio Lyrics _ Nhạc Trẻ Hay Nhất (128  kbps).mp3',
        linkMV : 'https://www.youtube.com/watch?v=9cPJLlNwO-w',
        imageSong: './assets/img/picture_song/soobin_pic.jpg' ,
        id_Singer : 8,
        id_Category : 7

    },
    {
        id : 37,
        name : 'Muộn Rồi Mà Sao Còn',
        path : './assets/music/sontung/Muộn Rồi Mà Sao Còn.mp3',
        linkMV : 'https://www.youtube.com/watch?v=9cPJLlNwO-w',
        imageSong: './assets/img/picture_song/sontung_pic.jpg' ,
        id_Singer : 9,
        id_Category : 7

    },
    {
        id : 38,
        name : 'Chúng Ta Của Hiện Tại',
        path : './assets/music/sontung/Sơn Tùng M-TP - Chúng Ta Của Hiện Tại.mp3',
        linkMV : 'https://www.youtube.com/watch?v=9cPJLlNwO-w',
        imageSong: './assets/img/picture_song/sontung_pic.jpg' ,
        id_Singer : 9,
        id_Category : 1

    },
    {
        id : 39,
        name : 'CÓ CHẮC YÊU LÀ ĐÂY',
        path : './assets/music/sontung/SƠN TÙNG M-TP - CÓ CHẮC YÊU LÀ ĐÂY - OFFICIAL MUSIC VIDEO.mp3',
        linkMV : 'https://www.youtube.com/watch?v=9cPJLlNwO-w',
        imageSong: './assets/img/picture_song/sontung_pic.jpg' ,
        id_Singer : 9,
        id_Category : 1

    },
    {
        id : 40,
        name : 'HÃY TRAO CHO ANH',
        path : './assets/music/sontung/SƠN TÙNG M-TP _ HÃY TRAO CHO ANH ft. Snoop Dogg _ Official MV (128  kbps).mp3',
        linkMV : 'https://www.youtube.com/watch?v=9cPJLlNwO-w',
        imageSong: './assets/img/picture_song/sontung_pic.jpg' ,
        id_Singer : 9,
        id_Category : 1

    },

]

var totalSong = []
var historySong = []

// tổng hợp lại thành 1 list bài hát từ
// danh sách bài hát, danh sách ca sĩ
// và danh sách thể loại nhạc
// Kiến thức củng cố : mảng và vòng lặp for
for(var i = 0 ; i < songs.length ; i++){
    for(var j = 0 ; j < singers.length ; j++){
        for(var t = 0; t < categorySong.length; t++){
            if(songs[i].id_Singer === singers[j].id && songs[i].id_Category === categorySong[t].id){
                totalSong[i] = {
                    id : songs[i].id,
                    name : songs[i].name,
                    path : songs[i].path,
                    pictureSong : songs[i].imageSong,
                    linkMV : songs[i].linkMV,
                    nameSinger : singers[j].name,
                    nameCategory : categorySong[t].name
                }
            }
        }
    }
}

const $ = document.querySelector.bind(document);
const $$ = document.querySelectorAll.bind(document);

const player = $('.player-control-container__behind');
const playlist = $('.main-right-playing-waiting');
const playlistHistory = $('.main-right-playing-history');
const nameSongCurrent = $('.cd-song-name');
const nameSingerCurrent = $('.cd-singer-name');
const cdThumb = $('.cd-thumb');
const audio = $('#audio');
const playBtn = $('.btn-toggle-play');
const nowPlaySongImage= $('.is-playing-now .song-thumb-img');
const nowPlaySongName = $('.is-playing-now .card-info__name-song');
const nowPlaySongSinger = $('.is-playing-now .card-info__name-singer');
const timeTotal = $('.time-total');
const timeNow = $('.time-now');
const progress = $('#progress');
const volume = $('#volume');
const nextBtn = $('.btn.btn-next');
const prevBtn = $('.btn.btn-prev');
const randomBtn = $('.btn.btn-random');
const repeatBtn = $('.btn.btn-repeat');
const searchContainer = $('.main-body-header__find');
const searchInput = $('.search-text');
const suggestionsPanel = $('.suggestions');
const appSuggestionsPanel = $('.app-suggest');
const volumeBtn = $('.fa-volume-up');
const timerBtn = $('.main-right-header-timer');
const timerModal = $('.modal-timer');
const saveTimeBtn = $('.save-btn');
const cancelTimeBtn = $('.cancel-btn');
const modalMain = $('.modal-main');
const timerInput = $$('.timer-input');
const timerOptions = $$('.time-options-item');
const timerPicker = $('.timer-picker');
const modalMainContent = $('.modal-main-content');

const minutesOptions = $$('.minutes-options-item');
const tabs = $$('.main-right-item')
const panes = $$('.playlist-main');


const navItemMenu = $$('.nav-item-menu');
const bodyMainMiddleList = $$('.main-body');
const bodyNoListSong = $$('.main-body.no-list-song');

const hourSetupItem = $$('.hours-setup-item');
const minutesSetupItem = $$('.minutes-setup-item');

const inputMinuteValue = $('.input-minute-value');
const inputHourValue = $('.input-hour-value');
const timeStop = $('.time-stop');
const saveBtnTimer = $('.save-btn-timer');

const playMusicItemMain = $$('.playmusic-item-main');
const navMusicToolItem = $$('.nav-music-tool-item');

const btnDiferentTop = $('.btn-different-top');
const btnSettingTop = $('.btn-setting-top');
const btncdMore = $('.btn-cd-more');


const imgSongInfo = $('.song-info-in-menu-img');
const nameSongInfo = $('.song-info-in-menu-name');

const listNewMusic = $('.list-new-music');
const listTop10Music = $('.list-top-10');
const btnWatchFull = $('.button-watch-100-full');

const listSongUserMain = $('.list-song-user-main');
const listSongUserSecond = $('.list-song-user-second');
const sliders = $('.radio-carousel__container');
const btnPrevRadio = $('.btn-prev-radio');
const btnNextRadio = $('.btn-next-radio');

var ImagePadding = 20;
var scrollAmout = 0;
        // var scrollPerClick = $('.img-1').clientWidth + ImagePadding;
var scrollPerClick = 1000



const PLAYER_STORAGE_KEY = 'F8_PLAYER'


const app = {
    currentIndex: 0,
    isPlaying : false,
    isRandom : false,
    isRepeat : false,
    isMute : false,
    isOpenMenuDif : false,
    isSettingTop : false,
    isOpenCdMore : false,
    isFull : false,
    appSongs : totalSong,
    config :  JSON.parse(localStorage.getItem(PLAYER_STORAGE_KEY)) || {},
    historySongs : [],
    setConfig: function(key,value){
        this.config[key] = value;
        localStorage.setItem(PLAYER_STORAGE_KEY, JSON.stringify(this.config));
    },
    // render ra giao diện của danh sách bài hát
    render: function(){
        console.log(this.historySongs);
        console.log(navItemMenu,bodyMainMiddleList)

        const htmls = this.appSongs.map((song, index) =>{
            return `


                <div class="my-song ${(index === this.currentIndex ? 'active' : '')}" data-index="${index}">
                    <div class="my-thumb" style="background-image: url('${song.pictureSong}')">
                    </div>

                    <div class="my-body-info">
                        <h3 class="my-title">${song.name}</h3>
                        <p class="my-author">${song.nameSinger}</p>
                    </div>

                    <div class="my-option">
                        <i class="fas fa-ellipsis-h"></i>
                    </div>
                </div>
            `
        });

        playlist.innerHTML = htmls.join('');
    },
    renderHistorySong: function(){

        this.removeSameSong(this.historySongs);
        const htmls = this.historySongs.map((song, index) =>{
            return `


                <div class="my-song ${(song.id-1 === this.currentIndex ? 'active' : '')}" data-index="${song.id - 1}">
                    <div class="my-thumb" style="background-image: url('${song.pictureSong}')">
                    </div>

                    <div class="my-body-info">
                        <h3 class="my-title">${song.name}</h3>
                        <p class="my-author">${song.nameSinger}</p>
                    </div>

                    <div class="my-option">
                        <i class="fas fa-ellipsis-h"></i>
                    </div>
                </div>
            `
        });

        playlistHistory.innerHTML = htmls.join('');
    },
    rederNewMusic : function(){
        // ${(index+1 === 1 ? 'is-top-1' : (index+1 === 2 ? 'is-top-2' : (index+1 === 3 ? 'is-top-3' : '')))}
        const htmls = this.appSongs.map((song, index) =>{

            return `
                <div class="chart-song-item">
                    <div class="info-item-chart">
                        <div class="media">
                            <div class="media-left">
                                <div class="song-prefix">
                                    <span class="number is-center ${(index+1 === 1 ? 'is-top-1' : (index+1 === 2 ? 'is-top-2' : (index+1 === 3 ? 'is-top-3' : '')))}">
                                        ${index+1}
                                    </span>
                                    <div class="sort is-center">
                                        <i class="far fa-window-minimize"></i>
                                    </div>
                                </div>
                                <div class="song-thumb">
                                    <img src="${song.pictureSong}" alt="" class="song-thumb-chart">
                                </div>
                                <div class="card-info">
                                    <div class="name-song">${song.name}</div>
                                    <h3 class="name-singer">${song.nameSinger}</h3>
                                </div>
                            </div>
                            <div class="media-main">
                                <div class="album-info">
                                    <a href="" class="category-song">${song.nameCategory}</a>
                                </div>
                            </div>
                            <div class="media-right">
                                <div class="time-song-item">
                                    <span class="time-song">03:34</span>
                                </div>
                                <div class="action-song-item">

                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            `

        });

        listNewMusic.innerHTML = htmls.join('');
    },
    rederFullMusic : function(){
        // ${(index+1 === 1 ? 'is-top-1' : (index+1 === 2 ? 'is-top-2' : (index+1 === 3 ? 'is-top-3' : '')))}
        const htmls = this.appSongs.map((song, index) =>{
            return `
                <div class="chart-song-item">
                    <div class="info-item-chart">
                        <div class="media">
                            <div class="media-left">
                                <div class="song-prefix">
                                    <span class="number is-center ${(index+1 === 1 ? 'is-top-1' : (index+1 === 2 ? 'is-top-2' : (index+1 === 3 ? 'is-top-3' : '')))}">
                                        ${index+1}
                                    </span>
                                    <div class="sort is-center">
                                        <i class="far fa-window-minimize"></i>
                                    </div>
                                </div>
                                <div class="song-thumb">
                                    <img src="${song.pictureSong}" alt="" class="song-thumb-chart">
                                </div>
                                <div class="card-info">
                                    <div class="name-song">${song.name}</div>
                                    <h3 class="name-singer">${song.nameSinger}</h3>
                                </div>
                            </div>
                            <div class="media-main">
                                <div class="album-info">
                                    <a href="" class="category-song">${song.nameCategory}</a>
                                </div>
                            </div>
                            <div class="media-right">
                                <div class="time-song-item">
                                    <span class="time-song">03:34</span>
                                </div>
                                <div class="action-song-item">

                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            `
        });

        listTop10Music.innerHTML = htmls.join('');
    },
    rederTop10Music : function(){
        // ${(index+1 === 1 ? 'is-top-1' : (index+1 === 2 ? 'is-top-2' : (index+1 === 3 ? 'is-top-3' : '')))}
        const htmls = this.appSongs.map((song, index) =>{
            if(index >= 10){
                return ``
            }else{
                    return `
                    <div class="chart-song-item">
                        <div class="info-item-chart">
                            <div class="media">
                                <div class="media-left">
                                    <div class="song-prefix">
                                        <span class="number is-center ${(index+1 === 1 ? 'is-top-1' : (index+1 === 2 ? 'is-top-2' : (index+1 === 3 ? 'is-top-3' : '')))}">
                                            ${index+1}
                                        </span>
                                        <div class="sort is-center">
                                            <i class="far fa-window-minimize"></i>
                                        </div>
                                    </div>
                                    <div class="song-thumb">
                                        <img src="${song.pictureSong}" alt="" class="song-thumb-chart">
                                    </div>
                                    <div class="card-info">
                                        <div class="name-song">${song.name}</div>
                                        <h3 class="name-singer">${song.nameSinger}</h3>
                                    </div>
                                </div>
                                <div class="media-main">
                                    <div class="album-info">
                                        <a href="" class="category-song">${song.nameCategory}</a>
                                    </div>
                                </div>
                                <div class="media-right">
                                    <div class="time-song-item">
                                        <span class="time-song">03:34</span>
                                    </div>
                                    <div class="action-song-item">

                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                `
            }

        });

        listTop10Music.innerHTML = htmls.join('');
    },
    rederListSongUserMain : function(){
        // ${(index+1 === 1 ? 'is-top-1' : (index+1 === 2 ? 'is-top-2' : (index+1 === 3 ? 'is-top-3' : '')))}
        const htmls = this.appSongs.map((song, index) =>{
            return `
            <div class="item-song-user">
                <div class="item-song-user-main">
                    <div class="media">
                        <div class="media-left">
                            <div class="song-thumb">
                                <img src="${song.pictureSong}" alt="" class="song-thumb-chart">
                            </div>
                            <div class="card-info">
                                <div class="name-song">${song.name}</div>
                                <h3 class="name-singer">${song.nameSinger}</h3>
                            </div>
                        </div>
                        <div class="media-main">
                            <div class="album-info">
                                <a href="" class="category-song">${song.nameCategory}</a>
                            </div>
                        </div>
                        <div class="media-right">
                            <div class="time-song-item">
                                <span class="time-song">03:34</span>
                            </div>
                            <div class="action-song-item">

                            </div>
                        </div>
                    </div>
                </div>
            </div>
            `
        });

        listSongUserMain.innerHTML = htmls.join('');
    },
    rederListSongUserSecond : function(){
        // ${(index+1 === 1 ? 'is-top-1' : (index+1 === 2 ? 'is-top-2' : (index+1 === 3 ? 'is-top-3' : '')))}
        const htmls = this.appSongs.map((song, index) =>{
            return `
            <div class="item-song-user">
                <div class="item-song-user-main">
                    <div class="media">
                        <div class="media-left">
                            <div class="song-thumb">
                                <img src="${song.pictureSong}" alt="" class="song-thumb-chart">
                            </div>
                            <div class="card-info">
                                <div class="name-song">${song.name}</div>
                                <h3 class="name-singer">${song.nameSinger}</h3>
                            </div>
                        </div>
                        <div class="media-main">
                            <div class="album-info">
                                <a href="" class="category-song">${song.nameCategory}</a>
                            </div>
                        </div>
                        <div class="media-right">
                            <div class="time-song-item">
                                <span class="time-song">03:34</span>
                            </div>
                            <div class="action-song-item">

                            </div>
                        </div>
                    </div>
                </div>
            </div>
            `
        });

        listSongUserSecond.innerHTML = htmls.join('');
    },
    defineProperties : function() {
        Object.defineProperty(this, 'currentSong', {
            get: function(){
                return this.appSongs[this.currentIndex]
            }
        })
    },
    // xử lý các sự kiện
    handleEvents: function() {
        const _this = this

        // Xử lý CD khi quay và dừng
        const cdThumbAnimate = cdThumb.animate([
            { transform : 'rotate(360deg'}
        ], {
            duration : 10000, // 10 giây
            iterations : Infinity,
        });

        cdThumbAnimate.pause()

        // Xử lý khi click Play
        playBtn.onclick = function(){
            if(_this.isPlaying){
                audio.pause()

            } else {
                audio.play()
            }
        }

        // Khi song được play
        audio.onplay = function() {
            _this.isPlaying = true
            player.classList.add('playing')
            cdThumbAnimate.play()
        }

        // Khi song bị pause
        audio.onpause = function() {
            _this.isPlaying = false
            player.classList.remove('playing')
            cdThumbAnimate.pause()
        }

        // hiển thị tổng số phút của bài hát
        audio.onloadedmetadata = function() {
            // console.log(audio.duration)
            const minuteTotal = Math.floor(audio.duration / 60);
            var secondTotal = Math.floor(audio.duration) - Math.floor(audio.duration / 60)*60;
            if(secondTotal < 10){
                secondTotal = `0${secondTotal}`
            }
            timeTotal.textContent = `${minuteTotal} : ${secondTotal}`;


        };

        // Khi tiến độ bài hát thay đổi
        audio.ontimeupdate = function(){
            // if(audio.duration){
            //     const progressPercent = Math.floor(audio.currentTime / audio.duration * 100)
            //     progress.value = progressPercent
            // }
            const minuteNow = Math.floor(audio.currentTime / 60);
            var secondNow = Math.floor(audio.currentTime) - Math.floor(audio.currentTime / 60)*60;
            if(secondNow < 10){
                secondNow = `0${secondNow}`
            }
            if(audio.duration){
                timeNow.textContent = `${minuteNow} : ${secondNow}`;
                const progressPercent =Math.floor(audio.currentTime/audio.duration*100);
                progress.value=progressPercent;
                progress.style.background = 'linear-gradient(to right, #998CEB 0%, #998CEB ' + progressPercent + '%, #d3d3d3 ' + progressPercent + '%, #d3d3d3 100%)'
            }
        }

        // Xử lý khi tua bài hát
        progress.oninput = function(e){
            const seekTime = audio.duration / 100 * e.target.value;
            audio.currentTime = seekTime;
            audio.play();
        }

        // khi tua loa
        volume.oninput = function(e){
            const seekTime =  Number(e.target.value/100);
            audio.volume = seekTime

            const volumePercent = Number(e.target.value)
            volume.style.background = 'linear-gradient(to right, #998CEB 0%, #998CEB ' + volumePercent + '%, #fff ' + volumePercent + '%, #fff 100%)'
            // audio.currentTime = seekTime;
        }

        // xử lý khi nhấn vào loa
        volumeBtn.onclick = function(){
            var myVolumePercent = Number(audio.volume)
            if(_this.isMute){
                myVolumePercent = 100;
                volume.value = 100;
                audio.volume = 1;
                _this.isMute = false
            }
            else{
                myVolumePercent = 0;
                volume.value = 0;
                audio.volume = 0;
                _this.isMute = true;

            }
            console.log(myVolumePercent)
            volume.style.background = 'linear-gradient(to right, #998CEB 0%, #998CEB ' + volume.value + '%, #fff ' + volume.value + '%, #fff 100%)'
        }

        // Khi next Song
        nextBtn.onclick = function() {
            if(_this.isRandom){
                _this.playRandomSong()
            }else{
                _this.nextSong();
            }
            _this.scrollToActiveSong();
            // _this.removeSameSong(_this.historySongs);
            _this.addCurrentSongInHistoryList();
            audio.play();
            _this.renderHistorySong();
            _this.render();
        }

        // Khi prev Song
        prevBtn.onclick = function() {
            if(_this.isRandom){
                _this.playRandomSong()
            }else{
                _this.prevSong();
            }
            _this.scrollToActiveSong();
            _this.addCurrentSongInHistoryList();
            audio.play();
            _this.renderHistorySong();
            _this.render();

        }

        // Khi random
        randomBtn.onclick = function() {
            _this.isRandom = !_this.isRandom;
            _this.setConfig('isRandom', _this.isRandom);
            randomBtn.classList.toggle('active', _this.isRandom);
        }

        // Khi lặp lại bài hát
        repeatBtn.onclick = function() {
            _this.isRepeat = !_this.isRepeat
            _this.setConfig('isRepeat', _this.isRepeat);
            repeatBtn.classList.toggle('active', _this.isRepeat)
        }

        btnDiferentTop.onclick = function() {
            _this.isOpenMenuDif = !_this.isOpenMenuDif
            $('.menu-different').classList.toggle('active', _this.isOpenMenuDif)
        }

        btnSettingTop.onclick = function() {
            _this.isSettingTop = !_this.isSettingTop
            $('.menu-setting-top').classList.toggle('active', _this.isSettingTop)
        }

        btncdMore.onclick = function() {
            _this.isOpenCdMore = !_this.isOpenCdMore
            $('.menu-setting-song').classList.toggle('active', _this.isOpenCdMore)
        }


        // Xử lý khi bài hát kết thúc
        audio.onended = function(){
            // cách 1 :
            // if(_this.isRandom){
            //     _this.playRandomSong()
            // }else{
            //     _this.nextSong();
            // }
            // audio.play();

            if(_this.isRepeat){
                audio.play();
            }else{
                nextBtn.click();
            }
        }



        // lắng nghe hành vi click vào playlist
        playlist.onclick = function(e){
            const songNode = e.target.closest('.my-song:not(.active)');
            // Xử lý khi chuyển đến song được click
            // closest kiểm tra nếu có song thì trả về true

            if(songNode || e.target.closest('.my-option')){
                // xử lý click vào song
                if(songNode){
                    // cách 1 :
                    //console.log(songNode.getAttribute('data-index'))
                    // cách 2 :
                    // console.log(songNode.dataset.index);
                    _this.currentIndex = Number(songNode.dataset.index);
                    _this.loadCurrentSong();
                    _this.addCurrentSongInHistoryList();
                    _this.removeSameSong(_this.historySongs);
                    _this.render();
                    _this.renderHistorySong();
                    audio.play();
                }
                // xử lý click vào option
                if(e.target.closest('.my-option')){

                }
                else{
                }
            }
        }

        // Xử lý khi click vào nghe gần đây
        playlistHistory.onclick = function(e){
            const songNode = e.target.closest('.my-song:not(.active)');
            // Xử lý khi chuyển đến song được click
            // closest kiểm tra nếu có song thì trả về true

            if(songNode || e.target.closest('.my-option')){
                // xử lý click vào song
                if(songNode){
                    // cách 1 :
                    //console.log(songNode.getAttribute('data-index'))
                    // cách 2 :
                    // console.log(songNode.dataset.index);
                    _this.currentIndex = Number(songNode.dataset.index);
                    _this.loadCurrentSong();
                    _this.addCurrentSongInHistoryList();
                    _this.removeSameSong(_this.historySongs);
                    _this.render();
                    _this.renderHistorySong();
                    audio.play();
                }
                // xử lý click vào option
                if(e.target.closest('.my-option')){

                }
                else{
                }
            }
        }

        tabs.forEach((tab, index) => {
            const pane = panes[index]

            tab.onclick = function () {
                $('.main-right-item.is-active-right').classList.remove('is-active-right');
                $('.playlist-main.active').classList.remove('active');

                this.classList.add('is-active-right');
                pane.classList.add('active');
            }
        })
        // console.log(playMusicItemMain,navMusicToolItem)

        navMusicToolItem.forEach((tab, index) => {
            const pane = playMusicItemMain[index]

            tab.onclick = function () {
                $('.nav-music-tool-item.is-active-right').classList.remove('is-active-right');
                $('.playmusic-item-main.active').classList.remove('active');

                this.classList.add('is-active-right');
                pane.classList.add('active');
            }
        })


        // timeOptionItem.forEach((tab, index) => {

        //     tab.onclick = function () {
        //         console.log(tab)

        //         $('.time-options-item.active').classList.remove('active');

        //         this.classList.add('active');
        //     }
        // })

        // xu ly su kien tim kiem
        searchInput.onkeyup = function(){
            // console.log('abc')
            suggestionsPanel.classList.remove('search-hide')
            appSuggestionsPanel.classList.remove('search-hide')
            const input = searchInput.value.toLowerCase()
            suggestionsPanel.innerHTML = ''
            const suggestions = _this.appSongs.filter(function (song) {
            //   return product.name.toLowerCase().startsWith(input)
                return song.name.toLowerCase().includes(input)
            })
            console.log(suggestions)
            // kiểm tra nếu danh sách gợi í bằng 0
            if(suggestions.length === 0){
                appSuggestionsPanel.classList.add('search-hide')
                searchContainer.classList.remove('search-active')
                suggestionsPanel.classList.add('search-hide')
            }
            else{
                suggestions.forEach(function (suggested) {
                    const div = document.createElement('div')
                    div.innerHTML = suggested.name
                    suggestionsPanel.appendChild(div)
                    searchContainer.classList.add('search-active')
                  })
                  if (input === '') {
                    suggestionsPanel.innerHTML = ''
                    searchContainer.classList.remove('search-active')
                    appSuggestionsPanel.classList.add('search-hide')
                    suggestionsPanel.classList.add('search-hide')

                }
            }

        }

        timerBtn.onclick = function(){
            timerModal.classList.add('open')
        }

        cancelTimeBtn.onclick = function(){
            timerModal.classList.remove('open')
        }

        timerModal.onclick = function(){
            timerModal.classList.remove('open');
            timerInput[0].classList.remove('focus');
            timerInput[1].classList.remove('focus');
        }
        timerPicker.onclick = function(event){
            event.stopPropagation()

        }

        modalMainContent.onclick = function(){
            timerInput[0].classList.remove('focus');
            timerInput[1].classList.remove('focus');

        }

        modalMain.onclick = function(event){
            event.stopPropagation()
        }

        // dong mo giao dien
        btnWatchFull.onclick = function(){
            if(_this.isFull === false){
                _this.rederFullMusic();
                _this.isFull = true;
                btnWatchFull.innerText  = 'Xem top 10'
                console.log('456')

            }
            else if(_this.isFull === true){
                _this.rederTop10Music();

                _this.isFull = false
                btnWatchFull.innerText  = 'Xem tất cả'

                console.log(btnWatchFull.textContent)
            }

        }

        timerInput.forEach((time, index) => {
            time.onclick = function () {
                if($('.timer-input.focus')){
                    $('.timer-input.focus').classList.remove('focus');
                    this.classList.add('focus');
                }else{
                    this.classList.add('focus');
                }
            }
        })

        // xu ly phan gio trong dat thoi gian
        timerOptions.forEach((time, index) => {
            const hourItem = hourSetupItem[index]

            time.onclick = function () {
                // $('.time-options-item.active').classList.remove('active');
                // this.classList.add('active');
                if($('.time-options-item.active')){
                    $('.time-options-item.active').classList.remove('active');
                    this.classList.add('active');
                    console.log(hourItem.innerHTML)
                    inputHourValue.textContent = hourItem.innerHTML;
                    // formatted_date()
                    timeStop.textContent = formatted_date()
                }else{
                    this.classList.add('active');
                    console.log(hourItem.innerHTML)
                    inputHourValue.textContent = hourItem.innerHTML;
                    // formatted_date()
                    timeStop.textContent = formatted_date()

                }
            }
        })

        // xu ly phan phut trong dat thoi gian
        minutesOptions.forEach((time, index) => {
            const minutesItem = minutesSetupItem[index]


            time.onclick = function () {
                // $('.time-options-item.active').classList.remove('active');
                // this.classList.add('active');
                if($('.minutes-options-item.active')){
                    $('.minutes-options-item.active').classList.remove('active');
                    this.classList.add('active');
                    // console.log(minutesItem.innerHTML)
                    inputMinuteValue.textContent = minutesItem.innerHTML;
                    formatted_date()
                    timeStop.textContent = formatted_date()

                    //console.log(this)
                }else{
                    this.classList.add('active');
                    // console.log(minutesItem.innerHTML)
                    inputMinuteValue.textContent = minutesItem.innerHTML;
                    formatted_date()
                    //console.log(this)
                    timeStop.textContent = formatted_date()

                }
            }
        })

        // dịch chuyển giữa các trang với nhau
        navItemMenu.forEach((itemMenu, index) => {
            const bodyItem = bodyMainMiddleList[index]

            navItemMenu[0].onclick = function (e) {
                $('.body-main-middle').classList.add('active-middle');
                $('.main-body.active').classList.remove('active');
                $('.nav-item-menu.is-active').classList.remove('is-active');
                this.classList.add('is-active');
                bodyMainMiddleList[0].classList.add('active');
            }

            navItemMenu[2].onclick = function (e) {
                $('.body-main-middle').classList.add('active-middle');
                $('.main-body.active').classList.remove('active');
                $('.nav-item-menu.is-active').classList.remove('is-active');
                this.classList.add('is-active');
                bodyMainMiddleList[2].classList.add('active');
            }

            navItemMenu[8].onclick = function (e) {
                $('.body-main-middle').classList.add('active-middle');
                $('.main-body.active').classList.remove('active');
                $('.nav-item-menu.is-active').classList.remove('is-active');
                this.classList.add('is-active');
                bodyMainMiddleList[8].classList.add('active');
            }

            navItemMenu[9].onclick = function (e) {
                _this.openToast();
            }

            navItemMenu[4].onclick = function (e) {
                _this.openToast();
            }

            navItemMenu[10].onclick = function (e) {
                _this.openToast();
            }

            itemMenu.onclick = function (e) {
                if($('.body-main-middle.active-middle')){
                    $('.body-main-middle.active-middle').classList.remove('active-middle');
                }
                $('.main-body.active').classList.remove('active');
                $('.nav-item-menu.is-active').classList.remove('is-active');
                this.classList.add('is-active');
                bodyItem.classList.add('active');
                console.log(navItemMenu);
                console.log(bodyMainMiddleList);
            }


        })

        //Handle slide show


        ////////////////////////

        // Xử lý dừng bài hát theo thời gian
        saveBtnTimer.onclick = function(){
            timerModal.classList.remove('open')
            var totalTime = Number(inputHourValue.innerHTML)*60*60*1000 + Number(inputMinuteValue.innerHTML)*60*1000;
            console.log(totalTime)
            _this.openToast(title ='Thông báo',
            message='Bài hát sẽ được dừng vào lúc ' + formatted_date(),
            type='info',
            duration = 3000);
            setTimeout(()=>{
                playBtn.click();
            },totalTime)
        }


        // Xử lý khi ấn prev slider
        btnPrevRadio.onclick = function(){
            console.log('123')
            _this.slideScrollLeft()
        }

        // Xử lý khi ấn next slider
        btnNextRadio.onclick = function(){
            console.log('456')
            _this.slideScrollRight()
        }

    },
    scrollToActiveSong: function(){
        setTimeout(() => {
            $('.my-song.active').scrollIntoView({
                behavior: 'smooth',
                block : 'center'
            })
            $('.main-right-playing-history .my-song.active').scrollIntoView({
                behavior: 'smooth',
                block : 'center'
            })
        },200)

    },
    loadCurrentSong: function(){
        nameSongCurrent.textContent =  this.currentSong.name;
        nameSingerCurrent.textContent =  this.currentSong.nameSinger;
        cdThumb.style.backgroundImage = `url('${this.currentSong.pictureSong}')`;
        nowPlaySongImage.src = this.currentSong.pictureSong;
        nowPlaySongName.textContent =  this.currentSong.name;
        nowPlaySongSinger.textContent =  this.currentSong.nameSinger;
        audio.src = this.currentSong.path;
        imgSongInfo.src = this.currentSong.pictureSong;
        nameSongInfo.textContent = this.currentSong.name;


        // console.log(nameSongCurrent, nameSingerCurrent, cdThumb, audio)

    },
    addCurrentSongInHistoryList: function(){
        for(var i = 0 ; i < this.appSongs.length; ++i){
            if(this.historySongs === []){
                this.historySongs.push(this.appSongs[0])
            }
            else if((this.appSongs[i].id - 1) === this.currentIndex){
                this.historySongs.push(this.appSongs[i])
            }
        }


    },
    openToast : function(title ='Thông báo',
    message='Trang này chưa được hoàn thiện',
    type='success',
    duration = 3000){
            const main = document.getElementById('toast');
            if (main) {
                const toast = document.createElement('div');


                //tự động chờ toast tắt
                const autoRemoveId = setTimeout(function(){
                    main.removeChild(toast);
                }, duration+1000);


                //Khi click vào nút tắt
                toast.onclick = function(e){
                    if (e.target.closest('.toast__close')){
                        main.removeChild(toast);
                        clearTimeout(autoRemoveId);
                    }
                }

                const icons = {
                    success: "fas fa-check-circle",
                    info: "fas fa-info-circle",
                    warning: "fas fa-exclamation-circle",
                    error: "fas fa-exclamation-circle"
                };

                const icon = icons[type];
                const delay = (duration / 1000).toFixed(2);

                toast.classList.add('toast', `toast--${type}`);
                toast.style.animation = `slideInLeft ease 0.3s, FadeOut linear 1s ${delay}s forwards`;

                toast.innerHTML=`
                    <div class="toast__icon">
                        <i class="${icon}"></i>
                    </div>
                    <div class="toast__body">
                        <h3 class="toast__title">${title}</h3>
                        <p class="toast__msg">${message}</p>
                    </div>
                    <div class="toast__close">
                        <i class="fas fa-times"></i>
                    </div>
                `;
                main.appendChild(toast);


            }
    },
    removeSameSong : function(array){
        var len = array.length;
        for(var i = 0; i < len; i++)
            for(var j = i + 1; j < len; j++)
                if(array[j] == array[i]){
                    array.splice(j,1);
                    j--;
                    len--;
                }
        return array;

    },
    nextSong: function(){
        // khi chọn bài tiếp theo giá trị hiện tại sẽ tăng lên 1 đơn vị
        this.currentIndex++;
        // khi next đến bài cuối phải quay lại bài đầu tiên
        if( this.currentIndex >= this.appSongs.length){
            this.currentIndex = 0;
        }
        this.loadCurrentSong();
    },
    prevSong: function(){
        // khi chọn bài tiếp theo giá trị hiện tại sẽ giảm xuống 1 đơn vị
        this.currentIndex--;
        // khi prev đến bài đầu tiên phải quay lại bài cuối cùng
        if( this.currentIndex < 0 ){
            this.currentIndex = this.appSongs.length - 1;
        }
        this.loadCurrentSong();
    },
    playRandomSong: function(){
        let newIndex
        do {
            newIndex = Math.floor(Math.random() * this.appSongs.length)
        }while(newIndex === this.currentIndex)

        this.currentIndex = newIndex;
        this.loadCurrentSong();
    },
    loadConfig: function(){
        this.isRandom = this.config.isRandom;
        this.isRepeat = this.config.isRepeat;
    },
    slideScrollLeft: function(){
        sliders.scrollTo({
            top:0,
            left : (scrollAmout -= scrollPerClick),
            behavior : "smooth"
        });

        if(scrollAmout < 0){
            scrollAmout = 0
        }
    },
    slideScrollRight: function(){
        if(scrollAmout <= sliders.scrollWidth - sliders.clientWidth){
            sliders.scrollTo({
            top:0,
            left : (scrollAmout += scrollPerClick),
            behavior : "smooth"
          });
        }
    },

    //thực thi hàm bắt đầu
    start : function(){

        this.loadConfig();

        this.addCurrentSongInHistoryList();
        this.removeSameSong(this.historySongs);

        // Định nghĩa các thuộc tính cho object
        this.defineProperties();


        // Lắng nghe / Xử lý các sự kiện (DOM Event)
        this.handleEvents();

        // Tải thông tin bài hát đầu tiên vào UI khi chạy ứng dụng
        this.loadCurrentSong();


        this.renderHistorySong();

        this.rederNewMusic();
        this.rederTop10Music();
        this.rederListSongUserMain();
        this.rederListSongUserSecond();

        // Render ra danh sách bài hát
        this.render();

        // Hien thi trang thai ban dau cua button
        randomBtn.classList.toggle('active', this.isRandom)
        repeatBtn.classList.toggle('active', this.isRepeat)


    }
}

app.start();

const slideImgs = $$('.container__slide-item');
        let imgIndex = 2;
        function slideShow() {
            const slideImgFirst = $('.container__slide-item.first')
            const slideImgSecond = $('.container__slide-item.second')
            const slideImgThird = slideImgs[imgIndex]
            const slideImgFourth = slideImgs[imgIndex === slideImgs.length -1 ?  0 : imgIndex + 1]
            slideImgFourth.classList.replace('fourth', 'third')
            slideImgThird.classList.replace('third', 'second')
            slideImgSecond.classList.replace('second', 'first')
            slideImgFirst.classList.replace('first', 'fourth')
            imgIndex++;
            if(imgIndex >= slideImgs.length) { //imgIndex: 0-7, slideImgs.length: 8
                imgIndex = 0;
            }
            setTimeout(slideShow, 2000)
        }

slideShow();


// var d = new Date(Date.now());

// // d.toString()

// console.log(d);

// thay doi dinh dang ngay

function formatted_date()
{
   var result="";
   var d = new Date();
   var totalTime = Number(inputHourValue.innerHTML)*60 + Number(inputMinuteValue.innerHTML);
   d.setMinutes(d.getMinutes() + totalTime);
//    result += d.getFullYear()+"/"+(d.getMonth()+1)+"/"+d.getDate() +
//              " "+ d.getHours()+":"+d.getMinutes()+":"+
//              d.getSeconds()+" "+d.getMilliseconds();
    result += d.getHours()+":"+d.getMinutes() + " " + d.getDate()+"/"+(d.getMonth()+1)+"/"+d.getFullYear();
    console.log(result)
   return result;
}

// console.log(formatted_date())




